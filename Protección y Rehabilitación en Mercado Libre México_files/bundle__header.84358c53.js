!function(t,e){function i(t){var e=tiny.extend(!0,{element:".nav-header",environment:"desktop",classes:{sticky:"nav-header-sticky",fixed:"nav-header--fixed",showing:"nav-header--showing",hiding:"nav-header--hiding"}},t);this.ui={header:e.element instanceof HTMLElement?e.element:document.querySelector(e.element)},this.environment=e.environment,this.classes=e.classes,this.headerHeight=this.getHeight(),this.shown=!1,this.init()}var s=function(){var t,e=/^(Webkit|Khtml|Moz|ms|O)(?=[A-Z])/,i=document.getElementsByTagName("script")[0].style;for(t in i)if(e.test(t))return t.match(e)[0].toLowerCase();return"WebkitOpacity"in i?"webkit":"KhtmlOpacity"in i?"khtml":""}();i.prototype.init=function(){this.bindEvents()},i.prototype.getHeight=function(){return this.ui.header.offsetHeight},i.prototype.bindEvents=function(){meli.on("header:show",this.show.bind(this)),meli.on("header:hide",this.hide.bind(this))},i.prototype.show=function(){var t=this.ui.header;if(this.isSticky()||this.shown)meli.emit("header:shown",t);else{this.ui.header.classList.add(this.classes.fixed);var e=this.getHeaderOffset();tiny.support.transition&&0!==e?(this.translate(e),tiny.once(t,tiny.support.transition.end,function(){t.classList.remove(this.classes.showing),this.shown=!0,meli.emit("header:shown",t)}.bind(this)),setTimeout(function(){t.classList.add(this.classes.showing),this.translate(0)}.bind(this),0)):(this.shown=!0,meli.emit("header:shown",t))}},i.prototype.hide=function(){var t=this.ui.header;if(this.isSticky()||!this.shown)meli.emit("header:hidden",t);else{var e=this.getHeaderOffset();tiny.support.transition&&0!==e?(t.classList.add(this.classes.hiding),tiny.once(t,tiny.support.transition.end,function(){t.classList.remove(this.classes.hiding),t.classList.remove(this.classes.fixed),t.style.transform="",this.shown=!1,meli.emit("header:hidden",t)}.bind(this)),setTimeout(function(){this.translate(this.getHeaderOffset())}.bind(this),0)):(t.classList.remove(this.classes.fixed),t.style.transform="",this.shown=!1,meli.emit("header:hidden",t))}},i.prototype.getHeaderOffset=function(){var e=t.scrollY||document.documentElement.scrollTop||0,i=e<this.headerHeight?e:this.headerHeight;return-i},i.prototype.translate=function(t){var e=s?s+"Transform":null,i=isNaN(t)?t:"translate(0, "+t+"px)";e&&(this.ui.header.style[e]=i),this.ui.header.style.transform=i},i.prototype.isSticky=function(){return this.ui.header.classList.contains(this.classes.sticky)},i.prototype.isMobile=function(){return"mobile"===this.environment},i.prototype.isDesktop=function(){return"mobile"!==this.environment},e.Header=i}(this,Meli.prototype);