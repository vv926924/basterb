!function(t,e,i){"use strict";function o(e){if(e&&e.data&&"string"==typeof e.data){e=e.data.split("=");var i=r[e[0]],o=[];if("undefined"!=typeof i){if(e[1])for(var n=e[1].split("&"),a=0,s=n.length;s>a;a++)o.push(n[a]);i.apply(t,o)}}}function n(){return this}var a,r={resize:function(t,e,o,n){a&&(n=parseInt(n,10)||"normal","true"==o?i(".chs-modal").animate({width:t,height:e},{duration:n,step:function(){a.refreshPosition()}}):(a.width(t).height(e),a.refreshPosition()))},close:function(){a&&a.hide()},remove:function(t){"close"===t&&i(".ch-modal .ch-close").hide()},emitShowEvent:function(e){if(a){var e=e||"default";a.once("show",function(){t.postMessage("modalShow="+e,"*")})}},emitHideEvent:function(e){if(a){var e=e||"default";a.once("hide",function(){t.postMessage("modalHide="+e,"*")})}},removeLoading:function(){a&&a.$container.removeClass("is-loading")}};n.prototype.bind=function(t,e){return r[t]=e,this},n.prototype.init=function(){return t.postMessage&&("undefined"!=typeof t.addEventListener?t.addEventListener("message",o,!1):"undefined"!=typeof t.attachEvent&&t.attachEvent("onmessage",o)),this},n.prototype.setModal=function(t){return a=t,this},e.PostMessage=n,e.postmessage=new n}(this,Meli.prototype,_$_),function(t,e,i){function o(){return this}var n=new chs.Modal(i('<a href="#"></a>')).on("hide",function(){i("#modal-iframe").attr("src","about:blank")}),a=document.querySelector("body");o.prototype.open=function(e,i){i=i||{};var o="true"==e.attr("data-modal:dinamic")||i.dinamic,a=e.attr("data-modal:width")||i.width,r=e.attr("data-modal:height")||i.height,s=e.attr("data-modal:url")||i.url,d=!!e.attr("data-modal:frameless")||i.frameless,c=d?"add":"remove",u=e.attr("data-modal:style")||i.style,l="new"===u?"add":"remove";n.$container[c+"Class"]("chs-modal-frameless"),n.$container[l+"Class"]("chs-modal-styled"),n.$container.addClass("is-loading"),(!o||t.postMessage&&o)&&(n.width(a).height(r).content(this.buildIframe(s,o)).show(),this.toggleContextOverflow("add"),meli.postmessage.setModal(n))},o.prototype.buildIframe=function(e,i){return void 0===i&&(i=!1),i&&(-1==e.indexOf("?")&&(e+="?"),e+="&parent_url="+encodeURIComponent(t.location)),'<iframe id="modal-iframe" src="'+e+'" width="100%" height="100%" class="modal-iframe" scrolling="auto" frameborder="0"></iframe>'},o.prototype.hide=function(){return n.hide(),this},o.prototype.init=function(){meli.postmessage.init();var t=this;i(".iframe-modal").on("click",function(e){try{e.preventDefault(),e.stopPropagation(),t.open(i(this))}catch(o){}}),n.on("hide",function(){t.toggleContextOverflow("remove")})},o.prototype.toggleContextOverflow=function(t){var e="add"===t?"hidden":"";a.style.overflow=e},e.IframeModal=o,e.iframeModal=new o}(this,Meli.prototype,_$_),function(t,e){"use strict";function i(){return this}var o;i.prototype.wasAuthenticated=function(){return o="authenticated",meli.registerExecutor("login"),this},i.prototype.success=function(){return o="authenticated",meli.iframeModal.hide(),meli.emit("login"),this.onSuccess&&(this.onSuccess(),this.onSuccess=null),this},i.prototype.show=function(t){return tiny.trigger("#login a","click"),t&&(this.onSuccess=t),this},i.prototype.isIdentified=function(){return this.isAuthenticated()||"identified"===o},i.prototype.isAuthenticated=function(){return"authenticated"===o},i.prototype.init=function(e){return o=e.state,this.isAuthenticated()&&meli.registerExecutor("login"),"undefined"!=typeof t.authorizationState&&"loaded"==t.authorizationState.status&&(t.authorizationState.authorized?this.wasAuthenticated():meli.registerExecutor("rollback-pre-authenticated")),this},e.login=new i}(this,Meli.prototype);