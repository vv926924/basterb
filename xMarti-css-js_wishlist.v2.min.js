/*!
----------------------------------------------------------------------------------------------------
* Important! - To edit this JS, you must use the JS source file.

* General Script - Iván López Luna [RE]
----------------------------------------------------------------------------------------------------
*/
"use strict";function init_wishlist(){$.get("/api/dataentities/WL/search?_fields=wishlistProducts&_where=(email="+profile_email+")",function(e){if(e.length){if(my_wishlist=JSON.parse(e[0].wishlistProducts),p_wl=Object.keys(my_wishlist).length,$("#total-wishlist").html(p_wl),$("#wishlist-wrapper").length){var i="";0==p_wl&&(i="<p>Aún no tienes productos en tu lista de deseos</p>"),$("#wishlist-wrapper").addClass("product-list list-view").html('<ul id="wl-container">'+i+"</ul>"),load_wishlist(),setTimeout(function(){get_total_wishlist()},2e3),$(".sideMenu a").each(function(){if(-1!=(e=$(this).attr("href")).indexOf("?")){var e=e.substring(0,e.indexOf("?"));$(this).attr("href",e)}})}if($("body.produto").length){var t=$("#___rc-p-id").val();null!=my_wishlist["p"+t]?$(class_pdp).addClass("active"):console.log("not in wishlist")}}else $("#wishlist-wrapper").length&&($("#wishlist-wrapper").html('<div class="re-central"><div id="#wl-container"><h2>No hay productos en tu lista de deseos</h2></div></div>'),$(".sideMenu a").each(function(){if(-1!=(e=$(this).attr("href")).indexOf("?")){var e=e.substring(0,e.indexOf("?"));$(this).attr("href",e)}}))}),$("body").on("click",class_pdp,function(e){e.preventDefault();var i=$(this),t=$("#___rc-p-id").val();i.hasClass("active")?update_wishlist(t,"remove"):update_wishlist(t,"add")}),$("body").on("click",class_item,function(e){e.preventDefault();var i=$(this),t=i.attr("data-id");i.hasClass("active")?update_wishlist(t,"remove"):update_wishlist(t,"add")}),$(class_item).not(".checked").each(function(){var e=$(this),i=e.attr("data-id");e.addClass("checked"),is_in_wishlist(i)}),$(document).ajaxComplete(function(e,i,t){-1!=t.url.indexOf("/buscapagina")&&$(class_item).not(".checked").each(function(){var e=$(this),i=e.attr("data-id");e.addClass("checked"),is_in_wishlist(i)})})}function load_wishlist(){$.each(my_wishlist,function(e,i){$("#wl-container").append('<li id="wl-wrapper-'+i.id+'" class="wl-wrapper"></li>'),load_product_wl(i.id)})}function load_product_wl(s){$.ajax({url:"/buscapagina?fq=productId:"+s+"&sl="+sl+"&cc=1&sm=0",success:function(e,i,t){0==t.responseText.length&&update_wishlist(s,"remove"),e.length&&(e=$(e).find('>ul:first-child>li:not(".helperComplement")'),$("#wl-wrapper-"+s).html(e),sameHeight())}})}function get_total_wishlist(){""!=profile_email&&$.get("/api/dataentities/WL/search?_fields=wishlistProducts&_where=(email="+profile_email+")",function(e){e.length?(my_wishlist=JSON.parse(e[0].wishlistProducts),p_wl=Object.keys(my_wishlist).length,$("#total-wishlist").html(p_wl)):$("#total-wishlist").html("0")})}function update_wishlist(a,l){""!=profile_email&&$.get("/api/dataentities/WL/search?_fields=wishlistProducts&_where=(email="+profile_email+")",function(e){if(e.length){if(my_wishlist=JSON.parse(e[0].wishlistProducts),"remove"==l){delete my_wishlist["p"+a];var i=JSON.stringify(my_wishlist)}else if("add"==l){(t={})["p"+a]={id:a},$.extend(my_wishlist,t);i=JSON.stringify(my_wishlist)}}else{var t;(t={})["p"+a]={id:a};i=JSON.stringify(t)}var s={};s.email=profile_email,s.wishlistProducts=i,$.ajax({accept:"application/vnd.vtex.ds.v10 json",contentType:"application/json; charset=utf-8",crossDomain:!0,data:JSON.stringify(s),type:"PUT",url:"/api/dataentities/WL/documents",success:function(){"remove"==l?($(class_pdp).removeClass("active"),$(class_item+'[data-id="'+a+'"]').removeClass("active")):($(class_pdp).addClass("active"),$(class_item+'[data-id="'+a+'"]').addClass("active")),get_total_wishlist()}})})}function is_in_wishlist(i){$.get("/api/dataentities/WL/search?_fields=wishlistProducts&_where=(email="+profile_email+")",function(e){e.length&&void 0!==(my_wishlist=JSON.parse(e[0].wishlistProducts))["p"+i]&&$(class_item+'[data-id="'+i+'"]').addClass("active")})}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},my_wishlist="",p_wl="",profile_email="",accountname=jsnomeLoja,sl="496c9cfa-b1dd-4e24-bfea-774e69b33b52",class_item=".product-item__wishlist",class_pdp=".product-detail__add-to-wishlist";!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==("undefined"==typeof exports?"undefined":_typeof(exports))?module.exports=e(require("jquery")):e(jQuery)}(function(f){function _(e){return w.raw?e:encodeURIComponent(e)}function m(e,i){var t=w.raw?e:function(e){0===e.indexOf('"')&&(e=e.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return e=decodeURIComponent(e.replace(s," ")),w.json?JSON.parse(e):e}catch(e){}}(e);return f.isFunction(i)?i(t):t}var s=/\+/g,w=f.cookie=function(e,i,t){if(1<arguments.length&&!f.isFunction(i)){if("number"==typeof(t=f.extend({},w.defaults,t)).expires){var s=t.expires,a=t.expires=new Date;a.setMilliseconds(a.getMilliseconds()+864e5*s)}return document.cookie=[_(e),"=",(l=i,_(w.json?JSON.stringify(l):String(l))),t.expires?"; expires="+t.expires.toUTCString():"",t.path?"; path="+t.path:"",t.domain?"; domain="+t.domain:"",t.secure?"; secure":""].join("")}for(var l,n,o=e?void 0:{},r=document.cookie?document.cookie.split("; "):[],c=0,d=r.length;c<d;c++){var p=r[c].split("="),u=(n=p.shift(),w.raw?n:decodeURIComponent(n)),h=p.join("=");if(e===u){o=m(h,i);break}e||void 0===(h=m(h))||(o[u]=h)}return o};w.defaults={},f.removeCookie=function(e,i){return f.cookie(e,"",f.extend({},i,{expires:-1})),!f.cookie(e)}}),$(function(){vtexid.setScope("b1165658-e9e5-4790-8819-52eb99341e51"),vtexid.setScopeName(jsnomeLoja),vtexjs.checkout.getOrderForm().done(function(e){null!=e.clientProfileData&&null!=e.clientProfileData.email&&e.loggedIn?(profile_email=e.clientProfileData.email,init_wishlist()):$("body").on("click",class_item+", "+class_pdp,function(e){e.preventDefault(),vtexid.start({locale:"es-MX",forceReload:!1}),$("html,body").animate({scrollTop:0},"slow")})})});
//# sourceMappingURL=xMarti-css-js_wishlist.v2.min.js.map