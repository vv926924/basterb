/*!
----------------------------------------------------------------------------------------------------
* Important! - To edit this JS, you must use the JS source file.

* General Script - Iván Luna [RE]
* ivanluna.re@outlook.com
----------------------------------------------------------------------------------------------------
*/
"use strict";function show_quick_view(u){var n=$("#product-item-color-"+u+" .color.active").attr("data-sku"),d=$('.product-item-main-image[id="img-'+u+'"]').attr("href");void 0===n&&(n=$('.icon-quick-view[data-id="'+u+'"]').attr("data-sku")),load_sku(n),vtexjs.catalog.getProductWithVariations(u).done(function(o){if($("#productSingleModal .qv-name").html(o.name),$("#productSingleModal h3.qv-name").attr("data-sku",o.skus[0].sku),$("#productSingleModal .product-modal-summary").html('<a href="'+d+'" class="qv-link">Ver más detalles del producto</a>'),$("#productSingleModal").append('<div class="hide hidden product-info-hide">'+$("#product-info-"+u).parent().html()+"</div>"),o.dimensions.length){o.dimensions[0];$.each(o.skus,function(o,d){if(void 0!==d.dimensions.Color){var a=d.sku,e=d.dimensions.Talla,t=d.bestPriceFormated,i=d.availablequantity,l=d.dimensions.Color,r=d.dimensions.Color.replace(/\s/g,"-").toLowerCase(),s=i<=5?"low-stock":"",c=d.sku==parseInt(n)?"active":"",p=0==d.available?"disabled":"";0==$(".product-modal-color .color."+r).length&&$(".product-modal-color").append('<div class="color '+r+'" data-sku="'+a+'" data-id="'+u+'" data-color="'+r+'" data-img="'+d.image+'">'+l+"</div>"),0==$(".product-modal-size #size-"+r).length&&$(".product-modal-size").append('<div class="size-wrapper" id="size-'+r+'"></div>'),""!=c&&($(".product-modal-size #size-"+r).addClass(c),$(".product-modal-color .color."+r).addClass(c)),$(".product-modal-size #size-"+r).append('<div class="size '+p+" "+s+'" data-price="'+t+'" data-stock="'+i+'" data-sku="'+a+'">'+e+"</div>"),$(".product-modal-color-wrapper,.product-modal-size-wrapper").fadeIn()}else if(void 0!==d.dimensions.Talla){$(".product-modal-size-wrapper").fadeIn();a=d.sku,e=d.dimensions.Talla,r="no-color",p="";if(0==d.available)p="disabled";0==$("#size-"+r).length&&$(".product-modal-size").append('<div class="size-wrapper active" id="size-'+r+'"></div>'),$(".product-modal-size #size-"+r).append('<div class="size '+p+'" data-sku="'+a+'">'+e+"</div>")}}),$(".product-modal-color, .product-modal-size").fadeIn(500)}else $("#productSingleModal .product-modal-size").append('<span class="product-size hide hidden no-variations available'+o.skus[0].available+'" data-id="'+o.skus[0].sku+'"></span>');$("#productSingleModal .add-to-list").attr("data-id",u),$('.product-wishlist .add-to-wishlist.active[data-id="'+u+'"]').length&&$("#productSingleModal .add-to-list").html("¡En tu lista de deseos!").addClass("active");var a=999987600,e="",t=0,i="";$.each(o.skus,function(o,d){d.bestPrice<a&&(a=d.bestPrice,e=d.bestPriceFormated,t=d.listPrice,i=d.listPriceFormated)}),999987600!=a&&(0!=t&&$("#productSingleModal .product-modal-price .price-old").html(i),$("#productSingleModal .product-modal-price .price-new").html(e))})}function load_sku(o){$.ajax({type:"GET",url:"/produto/sku/"+o,dataType:"json",success:function(a){$("#productSingleModal .qv-ref").html(a[0].Reference),$("#productSingleModal .product-modal-thumbnails").empty(),$.each(a[0].Images,function(o,d){d[0].IsMain&&$("#productSingleModal #productSingleModalImage").attr("src",d[0].Path),1<a[0].Images.length&&$("#productSingleModal .product-modal-thumbnails").append('<img src="'+d[0].Path+'">')})}})}function remove_quick_view(){$("#productSingleModal .qv-name").empty(),$("#productSingleModal #productSingleModalImage").attr("src",""),$("#productSingleModal .product-modal-price .price-old").empty(),$("#productSingleModal .product-modal-price .price-new").empty(),$("#productSingleModal .product-modal-summary").empty(),$("#productSingleModal .product-modal-thumbnails").empty(),$("#productSingleModal .product-size").remove(),$("#productSingleModal .button-wrapper .error").remove(),$(".product-modal-color,.product-modal-size").empty(),$(".product-modal-size-wrapper, .product-modal-color-wrapper").fadeOut(10),$(".product-info-hide").remove()}$(function(){$("body").on("click",".product-item-quick-view .icon-quick-view",function(o){o.preventDefault(),show_quick_view($(this).attr("data-id"))}),jq2("#productSingleModal").on("hidden.bs.modal",function(){remove_quick_view()}),$("body").on("click",".product-modal-thumbnails img",function(){var o=$(this).attr("src");$("#productSingleModal #productSingleModalImage").attr("src",o)}),$("body").on("click",".product-modal-size .size",function(){var o=$(this);if(o.hasClass("disabled"))return $(".product-modal-size .size").removeClass("selected"),o.addClass("selected"),$("#productSingleModal .button-wrapper .error").remove(),$(".msj-low-stock").remove(),!1;$(".product-modal-size .size").removeClass("selected"),o.addClass("selected"),$("#productSingleModal .button-wrapper .error").remove();var d=o.attr("data-price");$(".product-modal-price .price-new").html(d),o.hasClass("low-stock")?$(".product-modal-summary").prepend('<div class="msj-low-stock">Úlimas piezas</div>'):$(".msj-low-stock").remove()}),$("body").on("click",".product-modal-color .color",function(){var o=$(this),d=o.attr("data-sku"),a=o.attr("data-color");$(".product-modal-size .size-wrapper, .product-modal-color .color").removeClass("active"),$(".product-modal-size #size-"+a).addClass("active"),o.addClass("active"),$(".msj-low-stock").remove(),load_sku(d)}),$(".product-modal-sizes").on("click",".product-size",function(){})});